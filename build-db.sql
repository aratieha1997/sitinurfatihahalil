-- Create the core tables
CREATE TABLE companies (
    created_at timestamp NOT NULL DEFAULT (NOW() at time zone 'utc'),
    updated_at timestamp NOT NULL DEFAULT (NOW() at time zone 'utc'),
    company_id uuid PRIMARY KEY,
    display_name varchar(128) NOT NULL,
    pay_schedule_id uuid NOT NULL,
);

CREATE TABLE pay_schedule_periods (
    created_at timestamp NOT NULL DEFAULT (NOW() at time zone 'utc'),
    updated_at timestamp NOT NULL DEFAULT (NOW() at time zone 'utc'),
    period_id uuid PRIMARY KEY,
    schedule_id uuid NOT NULL,
    accrual_start_at timestamp NOT NULL,
    accrual_stop_at timestamp NOT NULL,
    transfer_block_at timestamp NOT NULL,
    CONSTRAINT valid_accrual_period CHECK (accrual_stop_at > accrual_start_at)
);

-- Populate pay schedule period data
INSERT INTO pay_schedule_periods (created_at,updated_at,period_id,schedule_id,accrual_start_at,accrual_stop_at,transfer_block_at) VALUES
	 ('2021-07-20 22:36:22.017','2021-07-20 22:36:22.017','f13c7984-5076-45e3-bd91-b1bd3c7dfce6'::uuid,'6a178b24-fd68-4050-a230-b0940122d47e'::uuid,'2021-07-01 00:00:00.000','2021-07-31 00:00:00.000','2021-07-24 16:00:00.000'),
	 ('2021-08-08 22:18:09.198','2021-08-08 22:18:09.198','a89de1c9-1440-4da2-b7a7-e2e67e044fd1'::uuid,'db701216-23b6-4008-a863-f80063ab2378'::uuid,'2021-07-01 00:00:00.000','2021-07-31 00:00:00.000','2021-07-20 16:00:00.000'),
	 ('2021-08-14 15:28:39.256','2021-08-14 15:28:39.256','595490e1-61b1-470c-b9e3-ec729dbcd472'::uuid,'647f86fa-e302-4d8d-9e9f-d1c742f1f89c'::uuid,'2021-07-01 00:00:00.000','2021-07-31 16:00:00.000','2021-07-31 16:00:00.000'),
	 ('2021-11-18 20:48:41.646','2021-11-18 20:48:41.646','38c54889-ce47-4421-8988-938ffd672df1'::uuid,'273c0df6-8acc-4d9c-8634-30592d8c1209'::uuid,'2021-11-01 00:00:00.000','2021-11-30 16:00:00.000','2021-11-26 07:30:00.000'),
	 ('2021-11-30 21:50:19.340','2021-11-30 21:50:19.340','e07b55b4-d7ce-4ed0-a18b-a49b683f6ef2'::uuid,'55398a09-a610-4d39-a2d5-e56d92bf1939'::uuid,'2021-12-01 00:00:00.000','2021-12-31 17:00:00.000','2021-12-20 16:00:00.000'),
	 ('2021-07-20 22:36:22.021','2021-07-20 22:36:22.021','60699ddf-ccfd-4f1f-bc0c-21e914bfd956'::uuid,'6a178b24-fd68-4050-a230-b0940122d47e'::uuid,'2021-08-01 00:00:00.000','2021-08-31 00:00:00.000','2021-08-24 16:00:00.000'),
	 ('2021-08-08 22:18:09.202','2021-08-08 22:18:09.202','5e01be0e-d5cf-4fa9-a999-416c1ee02a6b'::uuid,'db701216-23b6-4008-a863-f80063ab2378'::uuid,'2021-08-01 00:00:00.000','2021-08-31 00:00:00.000','2021-08-20 16:00:00.000'),
	 ('2021-08-14 15:28:39.260','2021-08-14 15:28:39.260','75f479f9-fc75-4998-a67a-de3ae41a92d5'::uuid,'647f86fa-e302-4d8d-9e9f-d1c742f1f89c'::uuid,'2021-08-01 00:00:00.000','2021-08-31 16:00:00.000','2021-08-31 16:00:00.000'),
	 ('2021-11-30 21:50:19.340','2021-11-30 21:50:19.340','dcd8fa6f-579d-42e7-a0dd-a6e5a042564d'::uuid,'647f86fa-e302-4d8d-9e9f-d1c742f1f89c'::uuid,'2021-12-01 00:00:00.000','2021-12-31 17:00:00.000','2021-12-30 17:00:00.000'),
	 ('2021-08-27 09:34:04.951','2021-08-27 09:34:04.951','b8c2bea9-3ef2-4093-94a1-9e948a1b916d'::uuid,'6a178b24-fd68-4050-a230-b0940122d47e'::uuid,'2021-09-01 00:00:00.000','2021-09-30 16:00:00.000','2021-09-24 17:00:00.000');
INSERT INTO pay_schedule_periods (created_at,updated_at,period_id,schedule_id,accrual_start_at,accrual_stop_at,transfer_block_at) VALUES
	 ('2021-09-10 04:06:12.113','2021-09-10 04:06:12.113','c2e34577-01b2-4579-8c5d-2c2ecbfe243b'::uuid,'db701216-23b6-4008-a863-f80063ab2378'::uuid,'2021-09-01 00:00:00.000','2021-09-30 00:00:00.000','2021-09-20 17:00:00.000'),
	 ('2021-08-14 15:28:39.264','2021-08-14 15:28:39.264','a930d434-74f9-46c2-8dcd-c2dd1e0ddc9b'::uuid,'647f86fa-e302-4d8d-9e9f-d1c742f1f89c'::uuid,'2021-09-01 00:00:00.000','2021-09-30 16:00:00.000','2021-09-30 16:00:00.000'),
	 ('2021-09-30 22:16:37.153','2021-09-30 22:16:37.153','105bdba2-8675-4b02-a6f9-0a203af635d1'::uuid,'db701216-23b6-4008-a863-f80063ab2378'::uuid,'2021-10-01 00:00:00.000','2021-10-31 17:00:00.000','2021-10-20 17:00:00.000'),
	 ('2021-11-30 21:50:19.340','2021-11-30 21:50:19.340','1d1ac446-cff1-4f40-8973-9f54f080d16d'::uuid,'6a178b24-fd68-4050-a230-b0940122d47e'::uuid,'2021-12-01 00:00:00.000','2021-12-31 17:00:00.000','2021-12-24 17:00:00.000'),
	 ('2021-08-14 15:28:39.268','2021-08-14 15:28:39.268','81497bf6-5253-4714-bb55-4e41e50a0f0e'::uuid,'647f86fa-e302-4d8d-9e9f-d1c742f1f89c'::uuid,'2021-10-01 00:00:00.000','2021-10-31 16:00:00.000','2021-10-31 16:00:00.000'),
	 ('2021-09-30 22:11:29.993','2021-09-30 22:11:29.993','43cd89bc-6e15-45b2-bb56-7f1080a0bafe'::uuid,'6a178b24-fd68-4050-a230-b0940122d47e'::uuid,'2021-10-01 00:00:00.000','2021-10-31 17:00:00.000','2021-10-24 16:00:00.000'),
	 ('2021-10-31 22:02:15.984','2021-10-31 22:02:15.984','e744ec9c-412d-4312-8342-a7d408dfc787'::uuid,'db701216-23b6-4008-a863-f80063ab2378'::uuid,'2021-11-01 00:00:00.000','2021-11-30 17:00:00.000','2021-11-20 17:00:00.000'),
	 ('2021-11-30 21:50:19.340','2021-11-30 21:50:19.340','3e289c67-70d5-4d1c-9650-5fa132fc11a3'::uuid,'db701216-23b6-4008-a863-f80063ab2378'::uuid,'2021-12-01 00:00:00.000','2021-12-31 17:00:00.000','2021-12-20 17:00:00.000'),
	 ('2021-10-31 22:02:15.984','2021-10-31 22:02:15.984','6e45f78c-d83d-464a-ab89-e06b685444a8'::uuid,'6a178b24-fd68-4050-a230-b0940122d47e'::uuid,'2021-11-01 00:00:00.000','2021-11-30 17:00:00.000','2021-11-24 17:00:00.000'),
	 ('2021-10-31 22:02:15.984','2021-10-31 22:02:15.984','8c1ebaeb-8855-4e2f-9401-bee48cf80d91'::uuid,'647f86fa-e302-4d8d-9e9f-d1c742f1f89c'::uuid,'2021-11-01 00:00:00.000','2021-11-30 17:00:00.000','2021-11-30 17:00:00.000');
INSERT INTO pay_schedule_periods (created_at,updated_at,period_id,schedule_id,accrual_start_at,accrual_stop_at,transfer_block_at) VALUES
	 ('2021-10-31 22:02:15.984','2021-10-31 22:02:15.984','652afa43-8d48-4254-84d7-e82177bcd0f0'::uuid,'55398a09-a610-4d39-a2d5-e56d92bf1939'::uuid,'2021-11-01 00:00:00.000','2021-11-30 17:00:00.000','2021-11-20 16:00:00.000'),
	 ('2021-09-12 21:41:51.004','2021-09-12 21:41:51.004','28bb16a5-8667-4220-b952-7b315347f361'::uuid,'55398a09-a610-4d39-a2d5-e56d92bf1939'::uuid,'2021-10-01 00:00:00.000','2021-10-31 00:00:00.000','2021-10-20 16:00:00.000'),
	 ('2021-09-12 21:41:50.997','2021-09-12 21:41:50.997','ccca7f66-98cb-46fb-8ecc-db7bc77d0c03'::uuid,'55398a09-a610-4d39-a2d5-e56d92bf1939'::uuid,'2021-09-01 00:00:00.000','2021-09-30 00:00:00.000','2021-09-20 16:00:00.000'),
	 ('2021-11-18 20:48:44.505','2021-11-18 20:48:44.505','9a032284-26d1-4a32-968a-548623ee93f6'::uuid,'273c0df6-8acc-4d9c-8634-30592d8c1209'::uuid,'2021-12-01 16:00:00.000','2021-12-31 16:00:00.000','2021-12-22 16:00:00.000');


INSERT INTO companies (created_at,updated_at,company_id,display_name,pay_schedule_id) VALUES
	 ('2021-07-20 22:32:09.097','2021-07-20 22:32:09.097','8a059a72-7fb2-47ed-a2e4-239a69329765'::uuid,'Tyrell Corporation','6a178b24-fd68-4050-a230-b0940122d47e'::uuid),
	 ('2021-08-14 15:25:37.419','2021-08-14 15:25:37.419','48b7bf36-6227-49db-ac9c-6293c0a2d777'::uuid,'Oceanic Airlines','647f86fa-e302-4d8d-9e9f-d1c742f1f89c'::uuid),
	 ('2021-08-08 22:17:27.591','2021-08-08 22:17:27.591','8cc9eb16-039d-460a-af61-44af4080384a'::uuid,'Stark Industries','db701216-23b6-4008-a863-f80063ab2378'::uuid),
	 ('2021-08-22 22:11:37.927','2021-10-31 22:56:32.409','1b64a98c-0e05-4aec-8dfb-b678ae2e5165'::uuid,'Initech','55398a09-a610-4d39-a2d5-e56d92bf1939'::uuid),
	 ('2021-10-29 08:15:02.000','2021-10-29 08:15:02.000','87847700-02de-4918-bb10-2c1571cf79db'::uuid,'Pizza Planet','0a3f4057-6999-42a7-bb57-452dd7466ad5'::uuid),
	 ('2021-11-22 20:30:30.027','2021-11-22 20:30:30.027','7109b538-adb0-498c-a173-d1f0aa5305d4'::uuid,'Hooli','6cdc682e-8c67-4495-95b0-e2dabe7214b1'::uuid),
	 ('2021-11-15 22:45:30.544','2021-11-15 22:45:30.544','61af2169-2d90-4f8e-a1df-1b79945994ae'::uuid,'Big Kahuna Burger','273c0df6-8acc-4d9c-8634-30592d8c1209'::uuid);